<div class="row mb-3">
  <div class="col">
    <a href="/inventories" class="btn btn-block btn-outline-secondary">
      Go back
    </a>
  </div>

  <div class="col">
    <a href="/delete_inventory/<%= @inventory.id %>" class="btn btn-block btn-outline-secondary">
      Delete inventory
    </a>
  </div>
</div>

<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h1>
      <%= @wine.vintage %> <%= @wine.vineyard %> <%= @wine.blend %>
    </h1>
  </div>
</div>

<%# Display info %>
    <div>
        <div class="row">
          <div class="col-md-4">
              <b>Owner</b>
            <br>
              <%= @owner.first_name %>
          </div>
          <div class="col-md-4">
              <b>Location</b>
            <br>
              <%= @inventory.location %>
          </div>
          <div class="col-md-4">
              <b>Price</b>
            <br>
              <%= @inventory.price %>
          </div>
        </div>

      <dl>
        <% if @inventory.end_date != nil %>
        <dt>
          Drank on
        </dt>
        <dd>
          <%= @inventory.end_date %>
        </dd>
        <% else %>
        <%end%>

        <dt>
          Tags
        </dt>
        <dd>
          <% if @tag_count == 0 %>
          No tags yet
          <% else %>
          <%= @tags.to_sentence %>
          <% end %>
        </dd>

        <dt>
          Average rating
        </dt>
        <dd>
          <% if @avg_rating == 5 %>
          <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
          <% elsif @avg_rating >= 4 %>
          <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
          <% elsif @avg_rating >= 3 %>
          <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
          <% elsif @avg_rating >= 2 %>
          <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
          <% elsif @avg_rating >= 1 %>
          <i class="fas fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
          <% else %>
          <i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i><i class="far fa-star"></i>
          <% end %>
          <%= @avg_rating %>
        </dd>

        <dt>
          Comments
        </dt>
        <dd>
          <% if @comments.count == 0 %>
          No comments yet
          <% else %>
          <table class="table">
          <tr>
            <th>
              User
            </th>

            <th>
              Comment
            </th>
          </tr>
          
          <% @comments.each do |comment| %>
          <tr>
            <td>
              <%= comment.commenter_name %>
            </td>
            <td>
              <%= comment.comment %>
            </td>
            <% end %>
          </tr>
          </table>
          <% end %>
        </dd>
        
        

      </dl>
    </div>
  </div>
</div>

<hr>

<%# Allow remove from inventory %>
<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h2>
      Remove from inventory
    </h2>

    <div class="col">
        <a href="/remove_inventory/<%= @inventory.id %>" class="btn btn-block btn-outline-secondary">
          Remove inventory
        </a>
      </div>
  </div>
</div>


<%# Allow tagging %>
<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h2>
      Add a new tag
    </h2>

    <form action="/insert_tag" method="post">
      <div class="form-group">
        <input type="hidden" id="wine_id_box" name="wine_id_from_query" class="form-control" value=<%= @inventory.wine_id%>>
      </div>

      <div class="form-group">
        <label for="tag_box">
          Tag
        </label>

        <input type="text" id="tag_box" name="tag_from_query" class="form-control">
      </div>

      <button class="btn btn-block btn-outline-secondary">
        Create tag
      </button>
    </form>
  </div>
</div>

<%# Allow rating %>
<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h2>
      Add a new user rating
    </h2>

    <form action="/insert_user_rating" method="post">

      <div class="form-group">
        <input type="hidden" id="wine_id_box" name="wine_id_from_query" class="form-control" value=<%= @inventory.wine_id%>>
      </div>

      <div class="form-group">
        <label>
          Rating
        </label>
        

        <div class="row">
          <%# 1 star %>
          <div class="col-md-2">
            <input type="radio" id="1_stars" value="1" name="rating_from_query">
              <label for="1_stars">
                <i class="fas fa-star"></i>
              </label>
          </div>
          <%# 2 star %>
          <div class="col-md-2">
            <input type="radio" id="2_stars" value="2" name="rating_from_query">
              <label for="2_stars">
                <i class="fas fa-star"></i><i class="fas fa-star"></i>
              </label>
          </div>
          <%# 3 star %>
          <div class="col-md-2">
            <input type="radio" id="3_stars" value="3" name="rating_from_query">
              <label for="3_stars">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              </label>
          </div>
          <%# 4 star %>
          <div class="col-md-2">
            <input type="radio" id="4_stars" value="4" name="rating_from_query">
              <label for="4_stars">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              </label>
          </div>
          <%# 5 star %>
          <div class="col-md-2">
            <input type="radio" id="5_stars" value="5" name="rating_from_query">
              <label for="5_stars">
                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              </label>
          </div>
        </div>
      </div>

      <button class="btn btn-block btn-outline-secondary">
        Submit rating
      </button>
    </form>
  </div>
</div>

<%# Allow commenting %>
<div class="row mb-3">
  <div class="col-md-8 offset-md-2">
    <h2>
      Add a new user comment
    </h2>

    <form action="/insert_user_comment" method="post">

      <div class="form-group">
        <input type="hidden" id="wine_id_box" name="wine_id_from_query" class="form-control" value=<%= @inventory.wine_id%>>
      </div>

      <div class="form-group">
        <label for="comment_box">
          Comment
        </label>

        <textarea id="comment_box" name="comment_from_query" class="form-control" rows="3"></textarea>
      </div>

      <button class="btn btn-block btn-outline-secondary">
        Create user comment
      </button>
    </form>
  </div>
</div>


